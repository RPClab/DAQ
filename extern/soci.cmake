include(ExternalProject)

if (NOT TARGET soci)
# ----- soci package -----
ExternalProject_Add(
                    soci
                    GIT_REPOSITORY ${soci_repository}
                    GIT_TAG ${soci_version}
                    GIT_PROGRESS TRUE
                    GIT_SHALLOW TRUE
                    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=${CMAKE_INSTALL_PREFIX} -DCMAKE_CXX_STANDARD=${CMAKE_CXX_STANDARD} -DCMAKE_CXX_STANDARD_REQUIRED=${CMAKE_CXX_STANDARD_REQUIRED} -DCMAKE_CXX_EXTENSIONS=${CMAKE_CXX_EXTENSIONS} -DCMAKE_PLATFORM_INDEPENDENT_CODE=${CMAKE_PLATFORM_INDEPENDENT_CODE} -DSOCI_SHARED=OFF -DSOCI_STATIC=ON -DSOCI_TESTS=OFF -DSOCI_HAVE_BOOST=FALSE -DSOCI_HAVE_BOOST_DATE_TIME=FALSE -DLIB_SUFFIX="" -DWITH_BOOST=OFF -DSOCI_LIBDIR=lib
                    GIT_SUBMODULES "" 
                    PREFIX ${CMAKE_CURRENT_BINARY_DIR}/soci-prefix
                    SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/soci
                    INSTALL_DIR ${CMAKE_INSTALL_PREFIX}
                    )
find_package(DB2)
list(APPEND DATABASES_INCLUDE_DIR "")
list(APPEND DATABASES_LIBRARIES "")
if(${DB2_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${DB2_INCLUDE_DIR})
  list(APPEND DATABASES_LIBRARIES "${DB2_LIBRARIES}")
endif()
find_package(Firebird)
if(${FIREBIRD_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${FIREBIRD_INCLUDE_DIR})
  list(APPEND DATABASES_LIBRARIES "${FIREBIRD_LIBRARIES}")
endif()
find_package(MySQL)
if(${MYSQL_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${MYSQL_INCLUDE_DIR})
  list(APPEND DATABASES_LIBRARIES "${MYSQL_LIBRARIES}")
endif()
if(${MYSQL_EMBEDDED_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${MYSQL_EMBEDDED_LIB_DIR})
  list(APPEND DATABASES_LIBRARIES "${MYSQL_EMBEDDED_LIBRARIES}")
endif()
find_package(ODBC)
if(${ODBC_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${ODBC_INCLUDE_DIRS})
  list(APPEND DATABASES_LIBRARIES "${ODBC_LIBRARIES}")
endif()
find_package(Oracle)
if(${ORACLE_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${ORACLE_INCLUDE_DIR})
  list(APPEND DATABASES_LIBRARIES "${ORACLE_LIBRARIES}")
endif()
find_package(PostgreSQL)
if(${POSTGRESQL_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${POSTGRESQL_INCLUDE_DIRS})
  list(APPEND DATABASES_LIBRARIES "${POSTGRESQL_LIBRARIES}")
endif()
find_package(SQLite3)
if(${SQLITE3_FOUND})
  list(APPEND DATABASES_INCLUDE_DIR ${SQLITE3_INCLUDE_DIR})
  list(APPEND DATABASES_LIBRARIES "${SQLITE3_LIBRARIES}")
endif()
endif()
